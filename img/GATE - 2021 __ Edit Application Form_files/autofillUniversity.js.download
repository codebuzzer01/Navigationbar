/**
 *  for autocompleting Qualification college name in Application form
 */
$(document).ready(function(){
		
		var items = [];
		var code = null;
		var obj = {};
		var fileVersionUni  = "8"; // update with value if JSON file is updated
			
		if(localStorage.getItem("dataCache_uni") && localStorage.getItem("fileVersionUni") == fileVersionUni ){
			items = JSON.parse(localStorage.getItem("dataCache_uni"));
		}
		else{
			$.getJSON( "./js/university_list.json", function( jsonData ) {	
				 
				  localStorage.setItem("dataCache_uni", JSON.stringify(jsonData));
				  localStorage.setItem("fileVersionUni", fileVersionUni);
				  items = JSON.parse(localStorage.getItem("dataCache_uni"));
				});
		}
		
		$("#qualDegreeState").on("change", function(){
			var state = $(this).val();
			fillUniversityNames(items, state);
		});
		var state = $('#qualDegreeState').val().toUpperCase();
		if(state){
			//console.log('state:'+state);
			fillUniversityNames(items, state);
		}
	});

function fillUniversityNames(items, code){
	var options = {
			data: items[code],
					
			list: {
					match: {
					enabled: true
		    	}
			}
		};			
	$("#provider-json-uni").easyAutocomplete(options);
}