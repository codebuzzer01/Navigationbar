/**
 *  for autocompleting Qualification college name in Application form
 */
$(document).ready(function(){
		
		var items = [];
		var code = null;
		var obj = {};
		var fileVersion  = "8"; // update with value if JSON file is updated
			
		if(localStorage.getItem("dataCache_clg") && localStorage.getItem("fileVersion") == fileVersion ){
			items = JSON.parse(localStorage.getItem("dataCache_clg"));
			//console.log('fileVersion : '+fileVersion+' :: items:'+items);
		}
		else{
			$.getJSON( "./js/CollegeList_2019.json", function( jsonData ) {	
				 
				  localStorage.setItem("dataCache_clg", JSON.stringify(jsonData));
				  localStorage.setItem("fileVersion", fileVersion);
				  items = JSON.parse(localStorage.getItem("dataCache_clg"));
				});
		}
		
		$("#qualDegreeState").on("change", function(){
			var state = $(this).val();
			fillCollegeNames(items, state);
		});
		/*$('#qualDegreeState').change(function(){
			code = $(this).val();
			var options = {
				data: items[code],
						
				list: {
						match: {
						enabled: true
			    	}
				}
			};
				
			$("#provider-json").easyAutocomplete(options);
		});
		*/
		var state = $('#qualDegreeState').val();
		//console.log('state:'+state);
		if(state){
				fillCollegeNames(items, state);
		}
	});

function fillCollegeNames(items, code){
	var options = {
			data: items[code],
					
			list: {
					match: {
					enabled: true
		    	}
			}
		};
			
	$("#provider-json-col").easyAutocomplete(options);
}
